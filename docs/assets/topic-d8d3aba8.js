import{_ as k,d as P,a9 as h,o as E,c as I,a as g,b as t,w as a,F,e as d}from"./index-4cff3ff4.js";import{c as _,E as u,a as v,b as z,d as U,e as L}from"./el-table-column-4b3e13c7.js";import{b as W,E as N,a as $,c as O}from"./el-button-459f8593.js";import{a as S,E as B}from"./topicCategory-4648fd0a.js";import{T as A,a as D,g as K,d as M,b as j,u as q}from"./TPaginationSelect-c117a77f.js";/* empty css                   */const G=P({data(){return{topics:[],page:{total:0,current:1,size:10},selectPage:{total:0,current:1,size:6,pagerCount:5},categories:[],searchId:null,dialogFormVisible:!1,topic:{id:0,showStatus:0},formLabelWidth:80}},mounted(){this.getTopicsPage(1),this.getCategoriesPage(1)},components:{"t-pagination-select":A},methods:{pageChange(e){this.getCategoriesPage(e)},getCategoriesPage(e){S({current:e,size:6}).then(i=>{console.log(i);const p=i.data.page;this.categories=p.records,this.selectPage=p}).catch(i=>{console.log(i)})},search(){if(this.searchId==null||this.searchId==""){alert("请输入话题编号后查询");return}D(this.searchId).then(e=>{e.data==null?this.topics=[]:(this.topics=[],this.topics.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getTopicsPage(1)},toEdit(e){this.dialogFormVisible=!0,this.topic=_(e)},getTopicsPage(e){K({current:e,size:10}).then(i=>{console.log(i);const p=i.data.page;this.topics=p.records,this.page=p}).catch(i=>{console.log(i)})},currentchange(e){this.getTopicsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),M(e).then(o=>{if(o.success)this.getTopicsPage(this.page.current);else return!1}).catch(o=>{})},toAdd(){this.dialogFormVisible=!0,this.topic={id:0,showStatus:0}},save(){const e=this.topic;e.id==0?j(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getTopicsPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")}):q(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getTopicsPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")})}}}),H={style:{margin:"10px"}},J={style:{width:"80%",margin:"0 auto"}},Q={class:"dialog-footer"};function R(e,o,i,p,X,Y){const f=h("router-link"),m=$,s=W,r=N,n=L,b=v,w=z,V=h("t-pagination-select"),c=B,C=O,y=U;return E(),I(F,null,[g("div",H,[t(f,{to:"/index"},{default:a(()=>[d("首页")]),_:1})]),g("div",null,[g("div",J,[t(s,{label:"话题编号","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:a(()=>[t(m,{modelValue:e.searchId,"onUpdate:modelValue":o[0]||(o[0]=l=>e.searchId=l),placeholder:"请输入话题编号"},null,8,["modelValue"])]),_:1}),t(r,{type:"primary",onClick:e.search},{default:a(()=>[d("查询")]),_:1},8,["onClick"]),t(r,{type:"warning",onClick:e.research},{default:a(()=>[d("重置")]),_:1},8,["onClick"]),t(r,{type:"success",onClick:e.toAdd},{default:a(()=>[d("添加")]),_:1},8,["onClick"])]),t(b,{data:e.topics,style:{width:"80%",margin:"0 auto"}},{default:a(()=>[t(n,{prop:"id",label:"话题编号",width:"150"}),t(n,{prop:"name",label:"话题名称",width:"120"}),t(n,{prop:"categoryId",label:"分类编号",width:"120"}),t(n,{prop:"attendCount",label:"参与人数",width:"120"}),t(n,{prop:"attendType",label:"参与方式",width:"120"}),t(n,{prop:"attentionCount",label:"关注人数",width:"120"}),t(n,{prop:"awardName",label:"奖品名称",width:"120"}),t(n,{prop:"content",label:"内容",width:"120"}),t(n,{fixed:"right",label:"功能管理",width:"120"},{default:a(l=>[t(r,{link:"",type:"primary",size:"small",onClick:T=>e.toEdit(l.row)},{default:a(()=>[d("更新")]),_:2},1032,["onClick"]),t(r,{link:"",type:"primary",size:"small",onClick:T=>e.del(l.row.id)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(w,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"80%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[9]||(o[9]=l=>e.dialogFormVisible=l),title:"话题编辑"},{footer:a(()=>[g("span",Q,[t(r,{onClick:o[8]||(o[8]=l=>e.dialogFormVisible=!1)},{default:a(()=>[d("取消")]),_:1}),t(r,{type:"primary",onClick:e.save},{default:a(()=>[d("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[t(C,{model:e.c},{default:a(()=>[t(s,{label:"话题名称","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.topic.name,"onUpdate:modelValue":o[1]||(o[1]=l=>e.topic.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(s,{label:"参与方式","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.topic.attendType,"onUpdate:modelValue":o[2]||(o[2]=l=>e.topic.attendType=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(s,{label:"所属类型","label-width":e.formLabelWidth},{default:a(()=>[t(V,{onPageChange:e.pageChange,optionSource:e.categories,modelValue:e.topic.categoryId,"onUpdate:modelValue":o[3]||(o[3]=l=>e.topic.categoryId=l),labelKey:"name",valueKey:"id",style:{width:"100%"},placeholder:"请选择所属类型",paginationOption:e.selectPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1},8,["label-width"]),t(s,{label:"奖品名称","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.topic.awardName,"onUpdate:modelValue":o[4]||(o[4]=l=>e.topic.awardName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(s,{label:"参与人数","label-width":e.formLabelWidth},{default:a(()=>[t(c,{modelValue:e.topic.attendCount,"onUpdate:modelValue":o[5]||(o[5]=l=>e.topic.attendCount=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(s,{label:"关注人数","label-width":e.formLabelWidth},{default:a(()=>[t(c,{modelValue:e.topic.attentionCount,"onUpdate:modelValue":o[6]||(o[6]=l=>e.topic.attentionCount=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(s,{label:"话题内容","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.topic.content,"onUpdate:modelValue":o[7]||(o[7]=l=>e.topic.content=l),type:"textarea",rows:3,placeholder:"请输入内容"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ae=k(G,[["render",R]]);export{ae as default};
