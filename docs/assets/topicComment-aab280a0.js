import{a8 as u,_ as E,d as v,a9 as f,o as F,c as I,a as p,b as o,w as l,F as S,e as s,a4 as z}from"./index-4cff3ff4.js";import{c as N,E as r,a as T,b as $,d as O,e as U,f as L,g as W}from"./el-table-column-4b3e13c7.js";import{b as B,E as D,a as A,c as K}from"./el-button-459f8593.js";import{T as M,g as j}from"./TPaginationSelect-c117a77f.js";/* empty css                   */function q(e){return u({url:"/mall/cms-topic-comment/page",method:"post",data:e})}function G(e){return u({url:`/mall/cms-topic-comment/one/${e}`,method:"get"})}function H(e){return u({url:`/mall/cms-topic-comment/del/${e}`,method:"get"})}function J(e){return u({url:"/mall/cms-topic-comment/add",method:"post",data:e})}function Q(e){return u({url:"/mall/cms-topic-comment/edit",method:"post",data:e})}const R=v({data(){return{comments:[],topics:[],page:{total:0,current:1,size:10},selectPage:{total:0,current:1,size:6,pagerCount:5},searchId:null,dialogFormVisible:!1,comment:{id:0,showStatus:0},formLabelWidth:90}},components:{"t-pagination-select":M},mounted(){this.getTopicsPage(1),this.getCommentsPage(1)},methods:{pageChange(e){this.getTopicsPage(e)},getTopicsPage(e){j({current:e,size:6}).then(n=>{console.log(n);const m=n.data.page;this.topics=m.records,this.selectPage=m}).catch(n=>{console.log(n)})},search(){if(this.searchId==null||this.searchId==""){alert("请输入回复编号后查询");return}G(this.searchId).then(e=>{e.data==null?this.comments=[]:(this.comments=[],this.comments.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getCommentsPage(1)},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.comment=N(e)},getCommentsPage(e){q({current:e,size:10}).then(n=>{console.log(n);const m=n.data.page;this.comments=m.records,this.page=m}).catch(n=>{console.log(n)})},currentchange(e){this.getCommentsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),H(e).then(t=>{if(t.success)this.getCommentsPage(this.page.current);else return!1}).catch(t=>{})},toAdd(){this.dialogFormVisible=!0,this.comment={id:0,showStatus:0}},save(){const e=this.comment;e.id==0?J(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getCommentsPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")}):Q(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getCommentsPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")})}}}),X={style:{margin:"10px"}},Y={style:{width:"60%",margin:"0 auto"}},Z={class:"dialog-footer"};function x(e,t,n,m,ee,te){const b=f("router-link"),g=A,d=B,i=D,c=U,C=T,w=$,V=f("t-pagination-select"),h=L,_=W,k=K,y=O;return F(),I(S,null,[p("div",X,[o(b,{to:"/index"},{default:l(()=>[s("首页")]),_:1})]),p("div",null,[p("div",Y,[o(d,{label:"回复编号","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:l(()=>[o(g,{modelValue:e.searchId,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchId=a),placeholder:"请输入回复编号"},null,8,["modelValue"])]),_:1}),o(i,{type:"primary",onClick:e.search},{default:l(()=>[s("查询")]),_:1},8,["onClick"]),o(i,{type:"warning",onClick:e.research},{default:l(()=>[s("重置")]),_:1},8,["onClick"]),o(i,{type:"success",onClick:e.toAdd},{default:l(()=>[s("回复")]),_:1},8,["onClick"])]),o(C,{data:e.comments,style:{width:"60%",margin:"0 auto"},"default-sort":{prop:"sort",order:"descending"}},{default:l(()=>[o(c,{prop:"id",label:"回复编号",width:"150"}),o(c,{prop:"memberNickName",label:"回复者昵称",width:"120"}),o(c,{label:"是否显示",width:"120"},{default:l(a=>[s(z(a.row.showStatus==0?"显示":"不显示"),1)]),_:1}),o(c,{prop:"content",label:"回复的内容",width:"120"}),o(c,{fixed:"right",label:"功能管理",width:"120"},{default:l(a=>[o(i,{link:"",type:"primary",size:"small",onClick:P=>e.toEdit(a.row)},{default:l(()=>[s("更新")]),_:2},1032,["onClick"]),o(i,{link:"",type:"primary",size:"small",onClick:P=>e.del(a.row.id)},{default:l(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(w,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"60%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=a=>e.dialogFormVisible=a),title:"分类编辑"},{footer:l(()=>[p("span",Z,[o(i,{onClick:t[5]||(t[5]=a=>e.dialogFormVisible=!1)},{default:l(()=>[s("取消")]),_:1}),o(i,{type:"primary",onClick:e.save},{default:l(()=>[s("保存 ")]),_:1},8,["onClick"])])]),default:l(()=>[o(k,{model:e.c},{default:l(()=>[o(d,{label:"回复者昵称","label-width":e.formLabelWidth},{default:l(()=>[o(g,{modelValue:e.comment.memberNickName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.comment.memberNickName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"回复的话题","label-width":e.formLabelWidth},{default:l(()=>[o(V,{onPageChange:e.pageChange,optionSource:e.topics,modelValue:e.comment.topicId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.comment.topicId=a),labelKey:"name",valueKey:"id",style:{width:"100%"},placeholder:"请选择回复的话题",paginationOption:e.selectPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1},8,["label-width"]),o(d,{label:"是否显示","label-width":e.formLabelWidth},{default:l(()=>[o(_,{modelValue:e.comment.showStatus,"onUpdate:modelValue":t[3]||(t[3]=a=>e.comment.showStatus=a),placeholder:"请选择"},{default:l(()=>[o(h,{label:"显示",value:0}),o(h,{label:"不显示",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"回复内容","label-width":e.formLabelWidth},{default:l(()=>[o(g,{modelValue:e.comment.content,"onUpdate:modelValue":t[4]||(t[4]=a=>e.comment.content=a),type:"textarea",rows:3,placeholder:"请输入内容"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ie=E(R,[["render",x]]);export{ie as default};
